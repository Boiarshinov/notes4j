---
title: "Форматы"
tags: 
  - formats
draft: false
---

# Форматы

В приложении наши объекты представлены в виде структур данных языка. 
Но для отправки по сети их необходимо преобразовать в такую форму, которую будет легко прочитать на другой стороне.
Для хранения данных на диске их также необходимо преобразовать в какой-то формат, из которого затем можно будет восстановить данные в объекты.
Процесс преобразования данных в необходимый формат называется сериализацией, энкодингом или маршаллингом. 
Обратный процесс называется десериализацией, декодингом или анмаршаллингом.

## Текстовые форматы

Текстовые форматы хороши тем, что их может прочитать человек.

Недостатком является то, что приходится передавать много лишней информации, в том числе названия полей.

- [JSON](json.md) - хорошо читается, позволяет легко изменять. Для определения контракта придумали JSON Schema
- [XML](xml.md) - строгий. Многословный, сложночитаемый. Для определения контрактов есть XSD-схемы
- [YAML](yaml.md) - читается еще лучше JSON, но из-за того, что опирается на отступы, не завоевал популярности как формат для сериализации данных. Зато стал очень популярен для описания конфигурации чего угодно

## Бинарные форматы

Обычно бинарные форматы предоставляют язык описания сообщений, на основе которых затем с помощью утилит, разработанных провайдером формата, генерируется код для выбранной платформы.

Бинарные форматы используются для снижения нагрузки на сеть за счет облегчения сообщений.

Популярные форматы:
- [Protobuf](protobuf.md) - формат от Google. Использует схемы для описания форматов сообщений. Имеет компилятор схем для всех популярных языков. Используется в gRPC.
- Thrift - формат от Facebook
- Avro - часто используется в области Big Data
- Java Serialization - плохой вариант, т.к. не все сервисы могут быть написаны на Java. Есть проблемы с прямой и обратной совместимостью
- [Cap'n Proto](https://capnproto.org/) - развитие protobuf от его создателей
- [SBE](https://github.com/real-logic/simple-binary-encoding) - Simple Binary Encoding

Для представления изображений, видео, музыки используются специализированные форматы: JPEG, PNG, MKV, MPEG4, MP3 и другие.

---
## К изучению

- [ ] [Сравнение различных форматов. Wiki](https://en.wikipedia.org/wiki/Comparison_of_data-serialization_formats)
- [X] [Мой репозиторий с примерами применения разных форматов в Java](https://github.com/Boiarshinov/formats-learning)
