---
title: "Deployment"
tags:
  - devops
  - architecture
draft: false
---

# Deployment

__Deployment__ - развертывание - это тот способ, с помощью которого приложение установлено на сервер.
__Deploy__ - это процесс установки приложения на сервер.

Различают различные виды деплоймента:
- все приложения на одном хосте
- одно приложение на хост
- каждое приложение в своей виртуальной машине
- каждое приложение в своем контейнере

### Все приложения на одном хосте
Такой способ деплоймента был принят до развития средств виртуализации.
Он приводил ко множеству проблем.
Сервисы боролись за ресурсы, занимали общие порты, требовали разных версий библиотек.
Последняя проблема особенно болючая.
Одному сервису нужна библиотека А версии 5, а другому версии 3, причем эти версии библиотеки несовместимы. 
Из-за чего эти два сервиса не могут быть установлены одновременно.
К тому же некоторым сервисам бывают нужны одинаковые вспомогательные сервисы (например, базы данных), которые не могут быть развернуты более чем в одном экземпляре на одном хосте.

### Одно приложение на хост
Для борьбы с общими зависимостями можно использовать подход с одним приложением на хост.
Но в этом случае требуется отдельное железо под каждый новый сервис.
А закупка железа - дело не быстрое.

### Каждое приложение в своей виртуальной машине
Когда появились средства виртуализации - это стало прорывом в области деплоймента.
Под каждый сервис на общем железе создавалась отдельная виртуальная машина. 
Виртуализация несет с собой некоторые накладные расходы, но с помощью виртуализации можно разграничить ресурсы сервера между сервисами.
Виртуальной машине можно выделить такой объем оперативной памяти и ядер, сколько необходимо конкретному сервису.

Популярные средства виртуализации:
- Hyper-V - на Windows серверах
- Proxmox - позволяет поднять виртуалку с любой ОС

### Каждое приложение в своем контейнере
Еще одной революцией в сфере деплоймента стало появление средств контейниризации.
Наибольшую популярность получил [Docker](./docker.md).
Контейнеры позволяют получить легковесную виртуализацию.
При этом для контейнеров легче конфигурировать сеть.
А запустить контейнер можно на любой ОС, в том числе рабочей среде разработчика.

Еще один плюс контейнеров - это близость к разработке.
Как правило разработчики самостоятельно подготавливают образы для поднятия контейнеров.
При описании образа разработчик добавить все необходимые зависимости для своего сервиса.
Таким образом разработчикам не придется делать заявки к инфраструктурной команде для настройки хостов.
Это уменьшает затраты на коммуникацию и соответственно скорость поставки.


---
Виртуализация часто соседствует с контейнеризацией.
Когда разработчикам требуются мощности для развертывания новых сервисов инфраструктурная команда создает для них виртуальный сервер со средствами контейниризации.
Инфраструктурщики смогут не бояться, что разработчики испортят хост - даже если испортят его можно будет пересоздать.
А разработчики получают возможность экспериментировать с контейнерами без необходимости обращения к инфрастуктуре на каждый чих.
