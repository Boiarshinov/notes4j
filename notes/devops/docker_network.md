---
title: "Docker Network"
tags:
  - devops
  - network
draft: false
---

Контейнеры могут быть подключены к виртуальным сетям. По умолчанию все контейнеры запускаются прикрепленными к виртуальной сети **bridge**.

Доступ с хоста к виртуальной сети осуществляется через NAT firewall.

Контейнеры, прикрепленные к одной виртуальной сети, могут общаться между собой. Таким образом не обязательно открывать доступ извне к некоторым контейнерам. Например в одной виртуальной сети могут быть запущены веб-сервер nginx и веб-приложение, при этом доступ к внешней сети будет иметь только nginx.

Контейнеры при необходимости могут быть подключены к нескольким виртуальным сетям одновременно.

По умолчанию в докере существует три виртуальные сети:

- **bridge** - виртуальная сеть по умолчанию
- **host** - контейнеры будут подключены к внутренней сети хоста. Использование сети host увеличивает производительность, благодаря тому что, не используются виртуальные сети. Но при этом теряется преимущество в изоляции.
- **none** - аналог null

Команды для управления сетями:

- `docker network ls` - выводит список всех сетей докера
- `docker network inspect <network>` - выводит информацию о докерной сети
- `docker network create <name>` - создает новую сеть
- `docker network connect <network_id> <container_id>` - подключить сеть к контейнеру
- `docker network disconnect <network_id> <container_id>` - отсоединить сеть от контейнера

### Драйверы

Драйверы - это дополнения, которые дают виртуальным сетям дополнительные возможности.

### Перенаправление портов

При запуске контейнера можно назначить с какого порта вашего устройства (хоста) будут перенаправляться запросы на порт внутренней сети докера. Делается это с помощью опции `--publish` или коротко `-p`
```sh
--publish <host_port>:<container_port>
```

При запуске контейнера можно указать сеть, к которой он будет прикреплен с помощью опции `--network`:

```sh
$ docker container run nginx --name web_server --network my_network --publish 80:80
```

### Docker DNS

Контейнеры, находящиеся в одной сети, могут обращаться друг к другу не по IP (который присваивается докером динамически), а по названию контейнера.

---
## К изучению

- [X] Курс Docker Mastery на Udemy в части касающейся