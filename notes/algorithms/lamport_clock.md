---
title: "Часы Лэмпорта"
tags: 
  - distributed_system
  - time
draft: false
---

# Часы Лэмпорта

Одна из реализаций логических часов.
Используется в распределенных системах для определения относительного порядка между событиями, которые произошли на различных нодах.

Часы Лэмпорта представляют собой обычный счетчик.
При старте системы значение счетчика равно нулю.

Когда происходит событие, счетчик инкрементируется на 1.
Если система отправляет сообщение о событии в другую ноду, то перед этим она инкрементирует счетчик, а затем передает вместе с сообщением значение счетчика.
Если система принимает сообщение от другой ноды, то она изменяет значение своего счетчика на максимальное значение из своего счетчика и счетчика из сообщения после чего прибавляет к получившемуся значению единицу.

### Свойства часов Лэмпорта
- Если событие А произошло раньше события Б, то значения счетчиков для этих событий тоже будут подчиняться этому неравенству.
- Если счетчик события А больше счетчика события Б, это не гарантирует, что событие А произошло позже события Б. Возможно эти события были конкурентны.
- Значения счетчиков у разных событий может совпадать

Для того чтобы различать события с одинаковым значением счетчика, произошедшие на различных нодах, можно для каждого события дополнительно указывать идентификатор ноды.
Таким образом у каждого события будет три параметра:
- само событие
- идентификатор ноды, на котором произошло событие
- значение счетчика системы в момент происхождения события

Комбинация значения счетчика и идентификатора ноды может являться уникальным идентификатором события.

Более продвинутой реализацией часов Лэмпорта являются векторные часы.

---
## К изучению
- [X] [Wiki](https://ru.wikipedia.org/wiki/%D0%A7%D0%B0%D1%81%D1%8B_%D0%9B%D1%8D%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%B0)
- [X] [4 лекция](https://www.youtube.com/watch?v=x-D8iFU1d-o&list=PLeKd45zvjcDFUEv_ohr_HdUFe97RItdiB&index=11&ab_channel=MartinKleppmann) курса по распределенным системам от Мартина Клеппманна
