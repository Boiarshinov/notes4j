---
title: "Декартово дерево"
tags:
  - data_structure
  - tree
draft: false
---

# Декартово дерево

Декартово дерево - это структура данных, основанная на [куче](heap.md) и [бинарном дереве поиска](binary_search_tree.md).
В иностранной литературе декартово дерево называется **Treap** (Tree + Heap).

Каждый узел декартового дерева содержит в себе ключ и приоритет.
Дерево должно подчиняться следующим ограничениям, чтобы считаться декартовым:
- дерево должно являться бинарным деревом поиска по значениям ключей
- Если нода A является родителем для ноды B, то приоритет ноды A должен быть больше или равен приоритету ноды B

Дерево называется декартовым, потому что его можно положить на координатную плоскость (при условии, что приоритет и ключ имеют числовые значения). 
Координаты ноды будут представлены приоритетом по вертикальной оси и ключом по горизонтальной оси. 

## Randomized Search Tree
Randomized Search Tree (RST) - это Treap, у которого приоритет узла выбирается рандомно.
Математическими выкладками доказано, что благодаря вероятностной природе генерации приоритетов средняя сложность вставки элемента составит `O(log n)`.

## Основные операции
### Поиск по ключу
Поиск по ключу происходит точно так же, как в BST.

### Вставка элемента
Сначала элемент вставляется в дерево по алгоритму BST.
Затем его положение необходимо исправить таким образом, чтобы выполнялось свойство кучи - элементы с высоким приоритетом должны стоять выше.
Для этого элемент поднимают в вверх с помощью **AVL-вращений**, которые позволяют изменить топологию дерева без нарушения BST-свойств.

### Удаление элемента
При удалении сначала элемент удаляется по алгоритмам BST, а затем дерево при необходимости перестраивается с помощью AVL-вращений.

---
## К изучению
- [X] Лекция 3.5 курса [Data Structures](https://stepik.org/course/579/syllabus)
