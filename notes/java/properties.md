---
title: "Файл параметров - Properties"
tags:
draft: false
---

Файл с расширением `.properties`, который хранит в себе свойства чего-либо в формате:
```properties
Свойство : значение
```

Файлы `.properties` используются для того, чтобы хранить информацию в читабельном для человека формате.

И свойство и значение представлены в формате String.
Существует несколько различных вариантов написания:
- `Свойство : значение`
- `Свойство = значение`
- `Свойство:значение`
- `Свойство=значение`

Также в `.properties` существуют комментарии, которые начинаются с символов `#` и `!`.
```properties
#comment
```

Для переноса строки используется обратный слеш
```properties
property1 = foo\
    bar
# Значение параметра будет foobar, пробелы перед 'bar' игнорируется
```


---
## Хранение коллекций

По умолчанию в properties-файлах одному ключу соответствует только одно значение, но многие библиотеки позволяют обойти это с помощью специального синтаксиса. Для конвертации значения по ключу в нужный формат в Spring используется аннотация `@Value`.

Мне кажется, что именно из-за этого ограничения в современном мире разумнее хранить настройки в формате json или yaml.

### Списки
<mark>//Дополнить, что по одному ключу может храниться несколько значений, перечисленных через запятую.</mark>

### Мапы

В properties-файле также можно хранить мапы. Для их записи используется следующий синтаксис:
```properties
hello.world.map = {key1: 'value1', key2: 'value2'}
```

---
## Properties

Для работы с properties-файлами в Java определен класс `Properties`, который унаследован от `Hashtable`

Конструкторы:
- `Properties()`
- `Properties(int)` - создает объект свойств с начальным количеством пар ключ-значения, указанным в аргументе
- `Properties(Properties default)` - создает объект свойств и назначает ему другой объект свойств в качестве дефолтного

Методы:
- `Object setProperty(String key, String value)` - добавляет одну переданную пару в перечень свойств
- `void putAll(Map <,>)` - добавляет в перечень свойств целую карту
- `String getProperty(String key)` - возвращает значение пары свойств по ключу свойства
- `String getProperty(String key, String defaultValue)` - возвращает значение пары свойств по ключу свойства, если значения нет, то возвращает дефолтную строчку
- `void load(Reader)` - читает список свойств из переданного символьного потока
- `void load(InputStream)` - читает список свойств из переданного байтового потока
- `void loadFromXML(InputStream)` - считывает свойства из файл XML, который передается в виде входного потока
- ~~`void save(OutputStream, String comments)`~~ - записывает в выходящий поток список свойств и комментарий. Не рекомендуется к использованию, потому что не выкидывает исключений.
- `void store(Writer, String comments)` - записывает в выходящий символьный поток список свойств и комментарий. Комментарий записывается первой строкой, первым символом устанавливается #. Кидает различные исключения.
- `void store(OutputStream, String comments)` - то же, что и предыдущий, но в символьный поток.
- `void storeToXML(OutputStream, String comments)` -
- `void list(PrintStream)` - выводит в поток все пары параметров, обрезая значения до 40 символов. Может использоваться для вывода в консоль
- `void list(PrintWriter)` - выводит в поток все пары параметров, обрезая значения до 40 символов.

Если необходимо привести данные, хранящиеся в объекте Properties, к карте, можно сделать это простым приведением типов:
```java
Map<String, String> map = new HashMap<String, String>((Map) properties);
```

---
## Считывание properties-файла из ресурсов

Для того чтобы считать propertie-файл из ресурсов, обычно используется ClassLoader.

Из статического контекста:
```java
final InputStream inputStream = ClassLoader.getSystemResourceAsStream(PROPERTIES_FILENAME);

final InputStreamReader reader = new InputStreamReader(inputStream, StandardCharsets.ISO_8859_1);

Properties properties = new Properties();
properties.load(reader);
```

---
## К изучению

- [X] Javadoc на класс Properties
- [X] Wiki: https://ru.wikipedia.org/wiki/.properties