---
title: "Коллекции - Collections"
tags:
  - core
  - collections
draft: false
---

Коллекциями называются классы, предназначенные для хранения элементов.

![](https://javarush.ru/api/1.0/rest/images/1293665/bffeb7a1-8616-4c52-8f15-2635e27c7254?size=0)

Все коллекции являются [обобщенными](../generics.md).

Коллекции находятся в пакете `java.util`. Существуют коллекции, предназначенные для работы в многонитевых программах, они находятся в пакете `java.util.concurrent`.

## Интерфейс Collection
Все коллекции реализуют интерфейс Collection.
В интерфейсе объявлены следующие методы:

- `int size()` - возвращает количество элементов в коллекции
- `boolean isEmpty()` - проверяет на пустоту
- `boolean contains(Object)` - проверяет наличие элемента в коллекции
- `boolean add(E)` - добавляет элемент в коллекцию (при возможности) и сообщает о том, добавлен ли он
- `boolean remove(Object)` - убирает элемент из коллекции и сообщает об успешности операции
- `void clear()` - удаляет из коллекции все элементы
- `Iterator iterator()` - возвращает итератор (про класс Iterator смотри ниже)
- `void forEach(Consumer<T>)` - выполняет действие, указанное в скобках для каждого элемента коллекции. Можно использовать ссылку на метод.
- Методы для операций с массивами: (тут какая-то ошибка - этих методов нет в классе )
    - `void addAll(Collection<T>, <T>[])` - добавляет в переданную коллекцию все элементы из переданного массива
    - `Object[] toArray()` - возвращает коллекцию в виде массива объектов
    - `T[] toArray(T[])` - возвращает коллекцию в виде массива объектов того типа, который нужен

```java
Integer[] array = list.toArray(new Integer[0]);
```

**ВАЖНО!!** Методы классов коллекций используют внутри метод equals(), определенный в классе, объекты которого хранятся в коллекции. Поэтому если этот класс пользовательский, то нужно обязательно обеспечить правильную работу этого метода

Основные типы коллекций:

- [Множества - Set](set.md)
- [Списки - List](list.md)
- [Очереди - Queue](queue.md)
- [Словари (карты, отображения) - Map](map.md)

По соглашению у каждой коллекции есть конструктор, принимающий в качестве входного параметра другую коллекцию.

Для работы с коллекциями служат итератор

## Итератор Iterator
Для объектов коллекций создаётся Итератор с помощью метода `iterator()`
```java
Set<String> set = new HashSet<>();
Iterator<String> iter = set.iterator();
```
Методы (всего три):
- `boolean hasNext()` - определяет есть ли еще объекты в коллекции
- `Object next()` - возвращает следующий объект из коллекции, если элементов больше нет, то бросается исключение
- `void remove()` - удаляет последний вызванный объект из коллекции

```java
ArrayList<myClass> list = new ArrayList<>();
//Заполнение списка
Iterator<myClass> iter = list.iterator();
while (iter.hasNext()){ //Удаление всех нулевых элементов
    if (iter.next().equals(null)){
        iter.remove();
    }
}
```

Для прогона по всем элементам коллекции вместо создания итератора можно использовать цикл foreach.

Но при использовании foreach не получится удалить из коллекции элементы. Для этого придется использовать итератор.

---

## Класс Collections
Для удобной работы с коллекциями реализован класс Collections.
В нем реализованы следующие методы:
- `sort(List)` - сортирует коллекцию по возрастанию (алфавиту)
- `reverse()` - переворачивает коллекцию
- `shuffle(List)` - перемешивает коллекцию
- `min()` - возвращает минимальный элемент
- `max()` - возвращает максимальный элемент
- `swap()` - меняет местами два элемента коллекции
- `disjoint()` - проверяет две коллекции на наличие одинаковых элементов. Есть - false, нет - true

```java
ArrayList<Integer> list = new ArrayList<>(Arrays.toList(8, 5, 7, 6, 1, 9, 2));
System.out.println("min " + Collections.min(list));
System.out.println("max " + Collections.max(list));
Collections.sort(list);
Collections.reverse(list);
Collections.swap(list, 0, list.size() - 1);
for (Integer i : list) System.out.print(i + " "); //выведет 1 8 7 6 5 2 9
```

- Методы, делающие коллекции неизменяемыми:
    - `Set<E> unmodifiableSet(Set<E>)` - возвращает множество в виде константы (нельзя редактировать)
    - `List<E> unmodifiableList(List<E>)` - возвращает список в виде константы (нельзя редактировать)
    - `Map<K, V> unmodifiableMap(Map<K, V>)` - возвращает словарь в виде константы (нельзя редактировать)