---
title: "Сокеты - Socket"
tags:
  - web
draft: false
---

Для того чтобы наладить связь между двумя компьютерами необходимо, чтобы один из них стал сервером, а второй клиентом.

Сервер - должен открыть порт, через который к нему будут подключаться клиенты

Клиент - должен знать адрес сервера и порт, через который он будет подключаться.

---
## Socket

Сокет - это соединение двух программ, которые могут быть запущены на разных компьютерах.

Сокет должен открываться на стороне клиента, а сервер, получая сигнал на подключение, воссоздает его.

Класс Socket реализует интерфейс AutoClosable, поэтому его можно использовать в блоке try-with-resourses.

Конструкторы:
- `Socket(String hostName, int port)` -
- `Socket(InetAddress ipAdress, int port)` -

Если в качестве номера порта указывается 0, то система сама выделит порт.

Если хотим общаться сами с собой, то передаем в параметре имени хоста - `localhost`.

Методы:
- `InetAddress getInetAdress()` - возвращает объект, содержащий данные о сокете
- `int getPort()` - возвращает порт, по которому происходит соединение с сервером
- `int getLocalPort()` - возвращает порт, к которому привязан сокет
- `boolean isConnected()` - возвращает true, если соединение установлено
- `void connect(SocketAddress)` - указывает новое соединение
- `boolean isClosed()` - возвращает true, если сокет закрыт
- `boolean isBound()` - возвращает true, если сокет привязан к адресу
- Общение (происходит через потоки ввода-вывода):
    - `InputStream getInputStream()`
    - `OutputStream getOutputStream()`

---
## ServerSocket
Когда клиент открыл сокет, сервер должен узнать о запросе и начать общение.

Для этого создает объект класса `SocketServer` и вызывается метод `accept()`, который ожидает, когда к серверу кто-нибудь подключится, а когда подключение состоялось, то метод возвращает объект типа Socket

Конструкторы: (адрес соединения не нужно указывать, потому что общение происходит на стороне сервера)
- `ServerSocket()`
- `ServerSocket(int port)` - указываем порт (макс. число подключений по умолчанию - 50)
- `ServerSocket(int port, int maxConnection)` - указываем порт и максимальное количество одновременных подключений
- `ServerSocket(int port, int maxConnection, InetAddress)` - то же плюс адрес для многоканального хоста.

Методы:
- `Socket accept()` - ждет подключения к серверу, и возвращает сокет подключенного клиента.

---
## К изучению
- [X] https://javarush.ru/groups/posts/654-klassih-socket-i-serversocket-ili-allo-server-tih-menja-slihshishjh