---
title: "Log aggregation"
tags: 
  - architecture
  - logging
  - observability
draft: false
---

# Log aggregation

Когда в архитектуре продукта появляется больше одного сервиса, возникает проблема сбора [логов](../logging.md) и поиска по ним.
Особенно актуальна эта проблема в [микросервисной архитектуре](./concepts.md).

Если каждый сервис пишет свои логи в файл, то при расследовании проблем будет неудобно ходить по разным серверам и искать файлы с логами разных сервисов.
Необходима единая система, в которую стекаются все логи, и по которой можно было бы легко агрегировать логи из разных сервисов по какому-либо признаку.

Одна из возможных архитектур выглядит так:
- С каждого сервиса логи забираются специальным демоном (агентом).
- Логи предобрабатываются и записываются в систему хранения в удобном для поиска виде.
- Разворачивается система, предоставляющая удобный UI для просмотра логов.

Существует множество готовых продуктов, позволяющих все это делать.
Например, __Elastic stack__ (ранее назывался ELK stack), включающий в себя Logstash для предобработки логов, Elastic для хранения логов и Kibana для просмотра.
Также одно время популярным был __Splunk__ до изменений в лицензировании.
Еще существует __Sage__ от ТБанк.
