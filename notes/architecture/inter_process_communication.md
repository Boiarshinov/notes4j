---
title: "Inter-Process Communication - IPC"
tags: 
  - microservices
draft: false
---

IPC - Межпроцессное взаимодействие.

Под этим понимается интеграция различных сервисов друг с другом. Это могут быть различные микросервисы одной системы или связь между различными сервисами (мобильное приложение с погодным сервисом)

|     |     |     |
| --- | --- | --- |
| Взаимодействие \ вид связи | **Один к одному** | **Один ко многим** |
| **Синхронное** | Запрос / ответ |     |
| **Асинхронное** | Асинхронный запрос / ответ<br>Однонаправленное уведомление | Издатель / подписчик<br>Издатель / асинхронные ответы |

- Запрос / ответ - клиент отправляет запрос и блокируется в ожидании ответа
- Асинхронный запрос / ответ - клиент отправляет запрос и не блокируется в ожидании ответа
- Однонаправленное уведомление - клиент отправляет сообщение, не ожидая ничего в ответ
- Издатель / подписчик - клиент публикует сообщение, а его подписчики получают его, не передавая ничего в ответ
- Издатель / асинхронные ответы - клиент публикует сообщение с запросом и какое-то время ожидает ответов от подписчиков

## Виды взаимодействия

- **RPI** (**RPC**) - Remote Procedure Invocation (Call) - удаленный вызов процедур
    - REST
    - gRPC
- Асинхронный обмен сообщениями
    - Брокер сообщений (MQ)
    - ???

## Механизмы коммуникации

### Синхронные

- CORBA - говно мамонта (199x)
- RMI - только для Java приложений
- SOAP - популярный в эпоху серверов приложений (200x)
- Thrift - от Facebook (2007)
- gRPC - от Google (2015)
- [REST](../web/rest.md) - список принципов, противопоставляющих себя RPC, но по сути являющихся им.

### Асинхронные

- AMQP
- STOMP
- WebSockets

## Форматы сообщений

В приложении наши объекты представлены в виде структур данных языка. 
Но для отправки по сети их необходимо преобразовать в такую форму, которую будет легко прочитать на другой стороне.
Процесс преобразования данных в необходимый формат называется сериализацией или маршаллингом. 
Обратный процесс называется десериализацией или анмаршаллингом.

Форматы делятся на два основных вида:
- текстовые - легко читаются человеком
- бинарные - занимают мало места

Подробнее про форматы можно прочитать в [отдельной заметке](../formats/formats.md).

---
## К изучению

- [ ] Крис Ричардсон "Микросервисы" в части касающейся
- [X] [Видео-курс от Мартина Клеппмана](https://www.youtube.com/watch?v=UEAMfLPZZhE&list=PLeKd45zvjcDFUEv_ohr_HdUFe97RItdiB&ab_channel=MartinKleppmann)