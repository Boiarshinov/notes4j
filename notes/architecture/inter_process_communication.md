---
title: "Inter-Process Communication - IPC"
tags: 
  - microservices
draft: false
---

IPC - Межпроцессное взаимодействие.

Под этим понимается интеграция различных сервисов друг с другом. Это могут быть различные микросервисы одной системы или связь между различными сервисами (мобильное приложение с погодным сервисом)

|     |     |     |
| --- | --- | --- |
| Взаимодействие \ вид связи | **Один к одному** | **Один ко многим** |
| **Синхронное** | Запрос / ответ |     |
| **Асинхронное** | Асинхронный запрос / ответ<br>Однонаправленное уведомление | Издатель / подписчик<br>Издатель / асинхронные ответы |

- Запрос / ответ - клиент отправляет запрос и блокируется в ожидании ответа
- Асинхронный запрос / ответ - клиент отправляет запрос и не блокируется в ожидании ответа
- Однонаправленное уведомление - клиент отправляет сообщение, не ожидая ничего в ответ
- Издатель / подписчик - клиент публикует сообщение, а его подписчики получают его, не передавая ничего в ответ
- Издатель / асинхронные ответы - клиент публикует сообщение с запросом и какое-то время ожидает ответов от подписчиков

## Виды взаимодействия

- RPI - Remote Procedure Invocation - удаленный вызов процедур
    - REST
    - gRPC
- Асинхронный обмен сообщениями
    - Брокер сообщений (MQ)
    - ???

## Механизмы коммуникации

### Синхронные

- REST
- gRPC

### Асинхронные

- AMQP
- STOMP
- WebSockets

## Форматы сообщений

### Текстовые форматы

Текстовые форматы хороши тем, что их может прочитать человек.

Недостатком является то, что приходится передавать много лишней информации, в том числе названия полей.

- [JSON](../formats/json.md) - хорошо читается, позволяет легко изменять. Для определения контракта придумали JSON Schema
- [XML](../formats/xml.md) - строгий. Многословный, сложночитаемый. Для определения контрактов есть XSD-схемы

### Бинарные форматы

Обычно бинарные форматы предоставляют язык описания сообщений, на основе которых затем с помощью утилит, разработанных провайдером формата, генерируется код для выбранной платформы.

Бинарные форматы используется для снижения нагрузки на сеть за счет облегчения сообщений

- Protobuf - используется в gRPC.
- Thrift
- Avro
- Java Serialization - плохой вариант, т.к. не все сервисы могут быть написаны на Java

---
## К изучению

- [ ] Крис Ричардсон "Микросервисы" в части касающейся