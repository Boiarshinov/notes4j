---
title: "Linux users"
tags:
  - linux
draft: true
---

# Users

Пользователи - это одна из основных абстракций OS Linux. 
Любой файл принадлежит какому-либо пользователю.
Любая команда выполняется от имени какого-либо пользователя.

Группы - это множества пользователей.

У каждого пользователя есть одна первичная группа и множество вторичных групп, в которые он может входить.

## Пользователи

Основной пользователь - `root`, еще он называется __суперпользователем__. 
Он создается по умолчанию в любом дистрибутиве Linux.
Этот пользователь может делать в системе все что угодно, поэтому из соображений безопасности на серверах и в контейнерах обычно создают отдельных пользователей, которым выдают минимально необходимые права.

Пользователя определяет его имя и идентификатор `uid`.


`whoami` - какой пользователь сейчас активен
```sh
❯ whoami
boiarshinov
```

`id` - выдает информацию о текущем пользователе и его идентификаторе, его группах и их идентификаторах
```sh
❯ id
uid=501(boiarshinov) gid=20(staff) groups=20(staff),12(everyone),61(localaccounts),79(_appserverusr),80(admin)
```

`su` - меняет текущего пользователя
```sh
❯ su - arty
```
Чтобы выйти из пользователя, используется команда `exit`
```sh
❯ su - arty
❯ whoami
arty
❯ exit
❯ whoami
root
```


### Добавление и удаление

Добавить пользователя можно с помощью одной из двух команд:
- `adduser` - интерактивная утилита
- `useradd` - неинтерактивная утилита

`useradd` обычно используется в скриптах, а `adduser` при ручном добавлении.
С использованием дополнительных ключей команду `adduser` можно тоже превратить в неинтерактивную.
Это бывает полезным из-за того, что в некоторых сборках Linux присутствует только эта команда.

Удалить пользователя можно с помощью команд:
- `userdel`
- `deluser`



`cat /etc/passwd` - вывести список всех пользователей


## Группы

`addgroup [-g <gid>] <groupname>` - создать группу с указанным идентификатором

`groups` - посмотреть список всех групп.
```sh
❯ groups
staff everyone localaccounts _appserverusr admin _appserveradm _lpadmin com.apple.sharepoint.group.1 _appstore _lpoperator _developer _analyticsusers com.apple.access_ftp com.apple.access_screensharing com.apple.access_ssh com.apple.access_remote_ae
```

`adduser [-G <groupname>] [-u <uid>] <username>` - создать пользователя в указанной группе с указанным идентификатором


## Sudo

`sudo` - позволяет выполнять команды от имени суперпользователя, не переключаясь на него. Утилита sudo установлена не во всех дистрибутивах Linux, и зачастую отсутствует в docker-контейнерах.
`sudo` работает только для тех пользователей, которые входят в группу `sudo`.


---
## К изучению
- [X] [Основные команды](https://sysadminium.ru/groups_and_users_in_linux/)
- [ ] [Основные понятия и команды](https://chukin.ru/edu/linux/03.php)
