---
title: "Cookies"
tags:
  - java_ee
  - servlet
  - web
draft: false
---

**Cookie** - это информация о пользователе веб-сайта, которая хранится в браузере и используется для обеспечения сессий на сайтах. Также куки могут использоваться для опознавания пользователя даже при его долговременном отсутствии.

Куки хранятся в браузере определенное время. Время хранения задается внутри java-кода.

Разбить заметку на две. Одну часть вынести в общие сведения IT, другую оставить тут.

---
## Структура Cookie

Cookie состоит из:

- строковая пара ключ - значение.
- срок действия (когда удаляются из браузера) - поле `expires`
- принадлежность к домену - поля `Domain`, `Path`. Cookie передаются только тем сайтам, которые подходят под значения указанных полей.

Принадлежность к домену была введена для обеспечения безопасности.

---
## Взаимодействие с сервером

- Cookie высылаются серверу при каждом запросе.

Cookie отправляются в заголовке запроса под названием Cookie и отправляются сервером в заголовке под названием `Set-Cookie`.

- Сервер имеет возможность добавлять новые cookies в браузер или изменять существующие.

---
## Класс Cookie

Конструкторы:
- `Cookie(String name, String value)` - создает куки в формате ключ-значение
- также их можно выдернуть из запроса с помощью метода `request.getCookies()`. Получить можно только массив всех кукисов. Их придется итерировать, чтобы найти нужный.

Методы:
- `void setMaxAge(long)` -
    - число больше 0 - устанавливает время хранения куки в браузере в секундах
    - 0 - удаляет куки из браузера
    - -1 - куки удалится из браузера после его закрытия
- `long getMaxAge()` - возвращает установленное значение времени хранения куки в браузере
- `String getName()` - возвращает имя куки
- `String getValue()` - возвращает значение куки

Cookie передается в response с помощью его метода `addCookie()`
```java
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException{
    Cookie cookie = new Cookie("some name", "some value");
    cookie.setMaxAge(24 * 60 * 60); //одни сутки
    response.addCookie(cookie);
}
```

---
## К изучению
- [X] [Сервлеты](servlet.md)
- [X] Видеоурок от Алишева: https://www.youtube.com/watch?v=GsKKUjQtz84&list=PLAma_mKffTOTTFqIkLXgHqVuL6xJhb0mr&index=9
- [X] История названия Cookie: https://corp.lingualeo.com/ru/2017/06/20/pechenki-zhuki-i-monstryi/