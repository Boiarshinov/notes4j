---
title: "Хранимые процедуры"
tags:
  - database
  - sql
draft: false
---

# Хранимые процедуры

Принципы работы:
- Исполняются сервером БД
- Могут изменять данные в БД
- Могут возвращать выборки аналогично SELECT
- Компилируются один раз
- Могут кэшировать данные, ускоряя выполнение операций

Типы хранимых процедур:
- Пользовательские функции
- Нативные хранимые процедуры
- Процедуры, реализуемые на высокоуровневых языках

### Преимущества
- Производительность - т.к. данные обрабатываются там, где они хранятся
- Организация поддержки целостности - атомарность операций
- Скрытие структуры данных - вместо чудовищных запросов сложных для восприятия можно использовать простые процедуры
- Модульность - процедуры можно использовать повторно
- Безопасность - можно запретить использовать DML, а разрешить использовать только хранимые процедуры
- Использование общего кода при работе с БД нескольких приложений

### Недостатки
- Разделение бизнес-логики - часть получается в БД, а часть в приложении
- Меньшая языковая выразительность процедурных расширений SQL
- Непереносимость - не получится перенести хранимую процедуру из одной СУБД в другую (или получится через геморрой)
- Погружение в особенности СУБД - программисту нужно тратить время на изучение внутрянки
- Отладка - дольше отлаживать, чем в IDE обычных ЯП
- Версионирование - что-то не так с системами контроля версий