---
title: "Custom methods"
tags:
  - api
  - rest
draft: false
---

# Пользовательские методы в API

Зачастую [стандартных методов](./standard_methods.md) не хватает, чтобы выразить желаемое действие над ресурсом.
Например: поставить лайк посту, отправить электронное письмо, отправить заявку на согласование и т.д.
Можно изловчиться и сделать это все на стандартных методах, например придумав фиктивные подсущности, но это будет выглядеть неестественно для пользователей API.
В таких случаях создают пользовательские методы.

Как понять: нужен кастомный метод или подойдет обычный Update?
Если действие над ресурсом просто изменяет набор его полей, то подойдет обычный Update.
Если же действие приводит к переходу между состояниями ресурса (актуально для конечных автоматов), то лучше использовать пользовательский метод.

Как правило пользовательские методы всегда используют HTTP метод POST.
Само действие при этом записывается как сегмент пути URI после ресурса:
```
POST /resource/{id}/action
```

Google в своих гайдах рекомендует использовать двоеточие для отделения ресурса от кастомного действия `/resource/{id}:action`, но далеко не все фреймворки поддерживают двоеточие в качестве разделителя.
Например, разработчики [Spring отказались](https://github.com/spring-projects/spring-framework/issues/24771) поддерживать двоеточие.


---
## К изучению
- [X] Книга "Паттерны проектирования API". Глава 9
