---
title: "Copy and Move methods"
tags:
  - api
  - rest
draft: false
---

# Методы Copy и Move

Клиенты нашего API иногда могут совершать ошибки при создании ресурсов.
Надо предоставить клиентам возможность исправить эти ошибки, а также возможность поэкспериментировать с ресурсами.
Для этого нужны методы Copy и Move - копирование и перемещение.

Перемещение решает две проблемы: перенос ресурса в другого родителя и переименование ресурса.


---
## Идентификаторы

### Копирование
Если у типа копируемого ресурса были допустимы пользовательские идентификаторы, то при копировании необходимо дать возможность пользователю назначить новый идентификатор.
В некоторых случаях поле с новым идентификатором нужно делать необязательным, чтобы если клиент не хочет думать над новым идентификатором, генерировать его на стороне сервера.
```
POST /exam/{examId}/copy
{
    "destinationId": "new_exam_id"
}
```
Если предлагаемый идентификатор уже занят, то нужно возвращать ошибку.

Если же для типа копируемого ресурса идентификаторы назначались самой системой, то и при копировании новый идентификатор должен назначаться системой, а у пользователя не должно быть возможности назначить новый идентификатор самостоятельно.
```
POST /exam/{examId}/copy
```

### Перемещение
Перемещение ресурса может быть нужно по двум причинам: перенос в другой родительский ресурс и переименование ресурса.
При перемещении ресурса из одной иерархии в другую, желательно сохранять его идентификатор:
```
/exam/exam_1/task/task_1 -> /exam/exam_5/task/task_1
```

```
POST /exam/{examId}/task/{taskId}/move
{
    "destinationParentId": "exam_id_2"
}
```

Если для ресурса разрешены пользовательские идентификаторы, то нужно дать возможность при перемещении переименовать ресурс.
Такой метод может быть даже у тех ресурсов, которые находятся на вершине иерархии (не имеют родителей, между которыми их нужно было бы перемещать).
```
POST /exam/{examId}
{
    "destinationId": "exam_id_new"
}
```


---
## К изучению
- [X] Книга "Паттерны проектирования API". Глава 17
